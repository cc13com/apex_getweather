prompt --application/set_environment
set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- ORACLE Application Express (APEX) export file
--
-- You should run the script connected to SQL*Plus as the Oracle user
-- APEX_200200 or as the owner (parsing schema) of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_api.import_begin (
 p_version_yyyy_mm_dd=>'2020.10.01'
,p_release=>'20.2.0.00.20'
,p_default_workspace_id=>2511254219604222529
,p_default_application_id=>117491
,p_default_id_offset=>0
,p_default_owner=>'CC13'
);
end;
/
 
prompt APPLICATION 117491 - GetWeather
--
-- Application Export:
--   Application:     117491
--   Name:            GetWeather
--   Date and Time:   11:05 Thursday February 18, 2021
--   Exported By:     CARSTEN.CERNY@CC13.COM
--   Flashback:       0
--   Export Type:     Component Export
--   Manifest
--     PLUGIN: 35871078034878017672
--   Manifest End
--   Version:         20.2.0.00.20
--   Instance ID:     63113759365424
--

begin
  -- replace components
  wwv_flow_api.g_mode := 'REPLACE';
end;
/
prompt --application/shared_components/plugins/dynamic_action/com_cc13_getweather
begin
wwv_flow_api.create_plugin(
 p_id=>wwv_flow_api.id(35871078034878017672)
,p_plugin_type=>'DYNAMIC ACTION'
,p_name=>'COM.CC13.GETWEATHER'
,p_display_name=>'GetWeather'
,p_category=>'EXECUTE'
,p_supported_ui_types=>'DESKTOP:JQM_SMARTPHONE'
,p_javascript_file_urls=>'#PLUGIN_FILES#apex_get_weather.js'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'/*-------------------------------------',
' * APEX Get Weather',
' * Version: 0.1 (08/12/2020)',
' * Author:  Carsten Cerny (CC13)',
' *-------------------------------------',
'*/',
'FUNCTION render_weather(p_dynamic_action IN apex_plugin.t_dynamic_action,',
'                               p_plugin         IN apex_plugin.t_plugin)',
'  RETURN apex_plugin.t_dynamic_action_render_result IS',
'  --',
'  -- plugin attributes',
'  l_result       apex_plugin.t_dynamic_action_render_result;',
'  --',
'  l_api_item            varchar2(100) := p_dynamic_action.attribute_01;',
'  l_latitude_item     varchar2(100) := p_dynamic_action.attribute_02;',
'  l_longitude_item    varchar2(100) := p_dynamic_action.attribute_03;',
'  l_temperature_item   varchar2(100)  := p_dynamic_action.attribute_04;',
'  l_conditions            varchar2(100) := p_dynamic_action.attribute_05;',
'  l_icon                varchar2(100) := p_dynamic_action.attribute_06;',
'  --',
'BEGIN',
'  --',
'  l_result.javascript_function := ''apex_get_weather.doIt'';',
'  l_result.attribute_01        := l_api_item;',
'  l_result.attribute_02        := l_latitude_item;',
'  l_result.attribute_03        := l_longitude_item;',
'  l_result.attribute_04        := l_temperature_item;',
'  l_result.attribute_05        := l_conditions;',
'  l_result.attribute_06        := l_icon;',
'  --',
'  RETURN l_result;',
'  --',
'END render_weather;'))
,p_api_version=>1
,p_render_function=>'render_weather'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_version_identifier=>'1.0'
,p_about_url=>'https://cc13.com'
,p_files_version=>77
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(35871666885529598571)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>1
,p_display_sequence=>10
,p_prompt=>'API_KEY'
,p_attribute_type=>'TEXT'
,p_is_required=>true
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(35871665284167572113)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>2
,p_display_sequence=>20
,p_prompt=>'Latitude'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>true
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(35871665904855575872)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>3
,p_display_sequence=>30
,p_prompt=>'Longitude'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>true
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(35871078254989017675)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>4
,p_display_sequence=>40
,p_prompt=>'Temperature Item'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>true
,p_supported_ui_types=>'DESKTOP:JQM_SMARTPHONE'
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(35871673497781732026)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>5
,p_display_sequence=>50
,p_prompt=>'Conditions'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>true
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(35871679705415790386)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>6
,p_display_sequence=>60
,p_prompt=>'Icon'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>true
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_event(
 p_id=>wwv_flow_api.id(35871079040361017680)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_name=>'weather-retrieved'
,p_display_name=>'Weather retrieved'
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '76617220617065785F6765745F776561746865723D7B74656D70657261747572655F6974656D3A22222C764C6F6767696E673A22222C656E61626C655F6C6F6767696E673A66756E6374696F6E28297B617065785F6765745F776561746865722E764C6F';
wwv_flow_api.g_varchar2_table(2) := '6767696E673D21317D2C646F49743A66756E6374696F6E28297B76617220743D746869732C653D742E616374696F6E2E61747472696275746530312C613D742E616374696F6E2E61747472696275746530322C693D742E616374696F6E2E617474726962';
wwv_flow_api.g_varchar2_table(3) := '75746530332C6E3D742E616374696F6E2E61747472696275746530342C723D742E616374696F6E2E61747472696275746530352C673D742E616374696F6E2E61747472696275746530363B617065785F6765745F776561746865722E764C6F6767696E67';
wwv_flow_api.g_varchar2_table(4) := '2626636F6E736F6C652E6C6F6728226170695F6974656D203D222C65293B766172206F3D617065782E6974656D2861292E67657456616C756528292C703D2268747470733A2F2F6170692E6F70656E776561746865726D61702E6F72672F646174612F32';
wwv_flow_api.g_varchar2_table(5) := '2E352F776561746865723F6C61743D222B6F2B22266C6F6E3D223B703D28703D702B617065782E6974656D2869292E67657456616C756528292B222661707069643D22292B652B2226756E6974733D6D6574726963222C6F2E6C656E6774683E303F242E';
wwv_flow_api.g_varchar2_table(6) := '6765744A534F4E28702C2866756E6374696F6E2874297B617065782E6974656D286E292E73657456616C756528742E6D61696E2E74656D702B2220C2B04322292C617065782E6974656D2872292E73657456616C756528742E776561746865725B305D2E';
wwv_flow_api.g_varchar2_table(7) := '6465736372697074696F6E292C24282223222B67292E617474722822737263222C2268747470733A2F2F6F70656E776561746865726D61702E6F72672F696D672F776E2F222B742E776561746865725B305D2E69636F6E2B224032782E706E6722297D29';
wwv_flow_api.g_varchar2_table(8) := '293A28617065782E6974656D286E292E73657456616C756528224E2F4122292C617065782E6974656D2872292E73657456616C756528224E2F412229297D7D3B0A2F2F2320736F757263654D617070696E6755524C3D617065785F6765745F7765617468';
wwv_flow_api.g_varchar2_table(9) := '65722E6A732E6D6170';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(35863536055455039387)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_file_name=>'apex_get_weather.min.js'
,p_mime_type=>'text/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '7B2276657273696F6E223A332C22736F7572636573223A5B22617065785F6765745F776561746865722E6A73225D2C226E616D6573223A5B22617065785F6765745F77656174686572222C2274656D70657261747572655F6974656D222C22764C6F6767';
wwv_flow_api.g_varchar2_table(2) := '696E67222C22656E61626C655F6C6F6767696E67222C22646F4974222C22646154686973222C2274686973222C226170695F6974656D222C22616374696F6E222C226174747269627574653031222C226C617469747564655F6974656D222C2261747472';
wwv_flow_api.g_varchar2_table(3) := '69627574653032222C226C6F6E6769747564655F6974656D222C226174747269627574653033222C226174747269627574653034222C22636F6E646974696F6E735F6974656D222C226174747269627574653035222C2269636F6E5F6974656D222C2261';
wwv_flow_api.g_varchar2_table(4) := '74747269627574653036222C22636F6E736F6C65222C226C6F67222C224C4154222C2261706578222C226974656D222C2267657456616C7565222C2266756C6C55524C222C226C656E677468222C2224222C226765744A534F4E222C226A736F6E222C22';
wwv_flow_api.g_varchar2_table(5) := '73657456616C7565222C226D61696E222C2274656D70222C2277656174686572222C226465736372697074696F6E222C2261747472222C2269636F6E225D2C226D617070696E6773223A2241414D412C49414149412C694241416D422C4341456E42432C';
wwv_flow_api.g_varchar2_table(6) := '694241416D422C4741436E42432C53414167422C4741456842432C65414167422C57414362482C694241416942452C554141572C4741493342452C4B41414D2C574145462C49414149432C45414153432C4B414354432C45414157462C4541414F472C4F';
wwv_flow_api.g_varchar2_table(7) := '41414F432C5941437A42432C45414167424C2C4541414F472C4F41414F472C5941433942432C4541416942502C4541414F472C4F41414F4B2C5941432F425A2C4541417142492C4541414F472C4F41414F4D2C5941436E43432C4541416B42562C454141';
wwv_flow_api.g_varchar2_table(8) := '4F472C4F41414F512C5941436843432C454141595A2C4541414F472C4F41414F552C59414731426C422C694241416942452C5541436A4269422C51414151432C494141492C61414163622C47414739422C49414349632C4541414D432C4B41414B432C4B';
wwv_flow_api.g_varchar2_table(9) := '41414B622C47414165632C5741472F42432C45414A4D2C75444149554A2C4541414D2C5141453142492C47414441412C45414155412C45414841482C4B41414B432C4B41414B582C4741416742592C574147562C5741434E6A422C454141572C67424145';
wwv_flow_api.g_varchar2_table(10) := '3542632C454141494B2C4F4141532C4541435A432C45414145432C51414151482C474141532C53414153492C4741457842502C4B41414B432C4B41414B74422C4741416B4236422C53414153442C4541414B452C4B41414B432C4B41414F2C4F41437444';
wwv_flow_api.g_varchar2_table(11) := '562C4B41414B432C4B41414B522C4741416942652C53414153442C4541414B492C514141512C47414147432C6141437044502C454141452C4941414D562C474141576B422C4B41414B2C4D41414F2C7143414175434E2C4541414B492C514141512C4741';
wwv_flow_api.g_varchar2_table(12) := '4147472C4B41414F2C65414B3746642C4B41414B432C4B41414B74422C4741416B4236422C534141532C4F41437243522C4B41414B432C4B41414B522C4741416942652C53414153222C2266696C65223A22617065785F6765745F776561746865722E6A';
wwv_flow_api.g_varchar2_table(13) := '73227D';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(35863536557318039388)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_file_name=>'apex_get_weather.js.map'
,p_mime_type=>'application/json'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '2F2F20415045582047657420576561746865720D0A2F2F20417574686F723A204361727374656E204365726E79202843433133290D0A2F2F2056657273696F6E3A20302E310D0A2F2F20446174653A20382F31322F323032300D0A2F2F2068747470733A';
wwv_flow_api.g_varchar2_table(2) := '2F2F6170692E6F70656E776561746865726D61702E6F72672F646174612F322E352F776561746865723F6C61743D35372E3130343233313036383433323133266C6F6E3D2D352E3231383530353835393337353030312661707069643D78787826756E69';
wwv_flow_api.g_varchar2_table(3) := '74733D6D65747269630D0A2F2F20676C6F62616C206E616D6573706163650D0A76617220617065785F6765745F77656174686572203D207B0D0A0D0A2020202074656D70657261747572655F6974656D203A2022222C0D0A20202020764C6F6767696E67';
wwv_flow_api.g_varchar2_table(4) := '2020202020203A2022222C0D0A202020200D0A20202020656E61626C655F6C6F6767696E673A2066756E6374696F6E2028290D0A20202020207B20617065785F6765745F776561746865722E764C6F6767696E67203D2066616C73653B0D0A2020202020';
wwv_flow_api.g_varchar2_table(5) := '7D2C0D0A202020200D0A20202020202020202F2F2066756E6374696F6E207468617420676574732063616C6C65642066726F6D20706C7567696E0D0A2020202020202020646F49743A2066756E6374696F6E2829207B0D0A202020202020202020202020';
wwv_flow_api.g_varchar2_table(6) := '2F2F20706C7567696E20617474726962757465730D0A20202020202020202020202076617220646154686973203D20746869733B0D0A202020202020202020202020766172206170695F6974656D203D206461546869732E616374696F6E2E6174747269';
wwv_flow_api.g_varchar2_table(7) := '6275746530313B0D0A202020202020202020202020766172206C617469747564655F6974656D203D206461546869732E616374696F6E2E61747472696275746530323B0D0A202020202020202020202020766172206C6F6E6769747564655F6974656D20';
wwv_flow_api.g_varchar2_table(8) := '3D206461546869732E616374696F6E2E61747472696275746530333B0D0A2020202020202020202020207661722074656D70657261747572655F6974656D2020203D206461546869732E616374696F6E2E61747472696275746530343B0D0A2020202020';
wwv_flow_api.g_varchar2_table(9) := '2020202020202076617220636F6E646974696F6E735F6974656D203D206461546869732E616374696F6E2E61747472696275746530353B0D0A2020202020202020202020207661722069636F6E5F6974656D203D206461546869732E616374696F6E2E61';
wwv_flow_api.g_varchar2_table(10) := '747472696275746530363B0D0A0D0A2020202020202020202020202F2F204C6F6767696E670D0A20202020202020202020202069662028617065785F6765745F776561746865722E764C6F6767696E6729207B0D0A202020202020202020202020202020';
wwv_flow_api.g_varchar2_table(11) := '20636F6E736F6C652E6C6F6728276170695F6974656D203D272C206170695F6974656D293B0D0A2020202020202020202020207D0D0A0D0A2020202020202020202020207661722055524C203D202268747470733A2F2F6170692E6F70656E7765617468';
wwv_flow_api.g_varchar2_table(12) := '65726D61702E6F72672F646174612F322E352F776561746865723F6C61743D220D0A202020202020202020202020766172204C4154203D20617065782E6974656D286C617469747564655F6974656D292E67657456616C756528293B0D0A202020202020';
wwv_flow_api.g_varchar2_table(13) := '202020202020766172204C4F4E203D20617065782E6974656D286C6F6E6769747564655F6974656D292E67657456616C756528293B0D0A0D0A2020202020202020202020207661722066756C6C55524C203D2055524C202B204C4154202B2022266C6F6E';
wwv_flow_api.g_varchar2_table(14) := '3D223B0D0A20202020202020202020202066756C6C55524C203D2066756C6C55524C202B204C4F4E202B20222661707069643D223B0D0A20202020202020202020202066756C6C55524C203D2066756C6C55524C202B206170695F6974656D202B202226';
wwv_flow_api.g_varchar2_table(15) := '756E6974733D6D6574726963223B0D0A2020202020202020202020200D0A2020202020202020202020206966284C41542E6C656E677468203E2030297B0D0A20202020202020202020202020202020242E6765744A534F4E2866756C6C55524C2C206675';
wwv_flow_api.g_varchar2_table(16) := '6E6374696F6E286A736F6E297B0D0A0D0A2020202020202020202020202020202020202020617065782E6974656D2874656D70657261747572655F6974656D292E73657456616C7565286A736F6E2E6D61696E2E74656D70202B202220C2B04322293B0D';
wwv_flow_api.g_varchar2_table(17) := '0A2020202020202020202020202020202020202020617065782E6974656D28636F6E646974696F6E735F6974656D292E73657456616C7565286A736F6E2E776561746865725B305D2E6465736372697074696F6E293B0D0A202020202020202020202020';
wwv_flow_api.g_varchar2_table(18) := '20202020202020202428222322202B2069636F6E5F6974656D292E617474722827737263272C202268747470733A2F2F6F70656E776561746865726D61702E6F72672F696D672F776E2F22202B206A736F6E2E776561746865725B305D2E69636F6E202B';
wwv_flow_api.g_varchar2_table(19) := '20224032782E706E6722293B0D0A20202020202020202020202020202020202020202F2F636F6E736F6C652E6C6F67286A736F6E2E776561746865725B305D2E69636F6E293B0D0A20202020202020202020202020202020202020202F2F636F6E736F6C';
wwv_flow_api.g_varchar2_table(20) := '652E6C6F672869636F6E5F6974656D293B0D0A202020202020202020202020202020207D290D0A2020202020202020202020207D20656C7365207B0D0A2020202020202020202020202020202020202020617065782E6974656D2874656D706572617475';
wwv_flow_api.g_varchar2_table(21) := '72655F6974656D292E73657456616C756528224E2F4122293B0D0A2020202020202020202020202020202020202020617065782E6974656D28636F6E646974696F6E735F6974656D292E73657456616C756528224E2F4122293B0D0A2020202020202020';
wwv_flow_api.g_varchar2_table(22) := '202020207D0D0A20202020202020207D0D0A202020207D3B0D0A20202020';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(35871079991556077989)
,p_plugin_id=>wwv_flow_api.id(35871078034878017672)
,p_file_name=>'apex_get_weather.js'
,p_mime_type=>'text/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
prompt --application/end_environment
begin
wwv_flow_api.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false));
commit;
end;
/
set verify on feedback on define on
prompt  ...done
